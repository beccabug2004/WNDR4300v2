package-$(CONFIG_PACKAGE_acl) += acl
package-$(CONFIG_PACKAGE_amule) += amule
package-$(CONFIG_PACKAGE_ap-mode) += ap-mode
package-$(CONFIG_PACKAGE_artmtd) += artmtd
package-$(CONFIG_PACKAGE_atheros-aquila-madwifi-11n-scripts) += atheros-aquila-madwifi-11n-scripts
package-$(CONFIG_PACKAGE_atheros-aquila-wpa2) += atheros-aquila-wpa2
package-$(CONFIG_PACKAGE_atheros-aquila-wpa2-wpatalk) += atheros-aquila-wpa2
package-$(CONFIG_PACKAGE_avahi-autoipd) += avahi
package-$(CONFIG_PACKAGE_avahi-daemon) += avahi
package-$(CONFIG_PACKAGE_avahi-dnsconfd) += avahi
package-$(CONFIG_PACKAGE_base-files) += base-files
package-$(CONFIG_PACKAGE_bc) += bc
package-$(CONFIG_PACKAGE_bridge) += bridge-utils
package-$(CONFIG_PACKAGE_bridge-mode) += bridge-mode
package-$(CONFIG_PACKAGE_curl) += libcurl
package-$(CONFIG_PACKAGE_datalib) += datalib
package-$(CONFIG_PACKAGE_detcable) += detcable
package-$(CONFIG_PACKAGE_detwan) += detwan
package-$(CONFIG_PACKAGE_disktype) += disktype
package-$(CONFIG_PACKAGE_dni-chat) += dni-chat
package-$(CONFIG_PACKAGE_dni-genl) += dni-iproute2
package-$(CONFIG_PACKAGE_dni-ip) += dni-iproute2
package-$(CONFIG_PACKAGE_dni-mtd) += dni-mtd
package-$(CONFIG_PACKAGE_dni-ntpclient) += dni-ntpclient
package-$(CONFIG_PACKAGE_dni-ripd) += dni-ripd
package-$(CONFIG_PACKAGE_dni-tc) += dni-iproute2
package-$(CONFIG_PACKAGE_dnibusybox) += dnibusybox
package-$(CONFIG_PACKAGE_dnichat) += dnippp
package-$(CONFIG_PACKAGE_dnidnsmasq) += dnidnsmasq
package-$(CONFIG_PACKAGE_dnimobile) += dnimobile
package-$(CONFIG_PACKAGE_dnippp) += dnippp
package-$(CONFIG_PACKAGE_dnippp-mod-l2tp) += dnippp
package-$(CONFIG_PACKAGE_dnippp-mod-pppoa) += dnippp
package-$(CONFIG_PACKAGE_dnippp-mod-pppoe) += dnippp
package-$(CONFIG_PACKAGE_dnippp-mod-pptp) += dnippp
package-$(CONFIG_PACKAGE_dnippp-mod-radius) += dnippp
package-$(CONFIG_PACKAGE_dnipppdump) += dnippp
package-$(CONFIG_PACKAGE_dnipppstats) += dnippp
package-$(CONFIG_PACKAGE_dns-ipupdate) += dns-ipupdate
package-$(CONFIG_PACKAGE_e2fsprogs) += e2fsprogs
package-$(CONFIG_PACKAGE_ebtables) += ebtables
package-$(CONFIG_PACKAGE_ebtables-utils) += ebtables
package-$(CONFIG_PACKAGE_ez-ipupdate) += ez-ipupdate
package-$(CONFIG_PACKAGE_factory-tools) += factory-tools
package-$(CONFIG_PACKAGE_failover) += dni-failover
package-$(CONFIG_PACKAGE_fetchpin) += fetchpin
package-$(CONFIG_PACKAGE_ffmpeg) += ffmpeg
package-$(CONFIG_PACKAGE_greendownload) += greendownload
package-$(CONFIG_PACKAGE_hotplug2) += hotplug2
package-$(CONFIG_PACKAGE_iconv) += libiconv
package-$(CONFIG_PACKAGE_igmpproxy) += igmpproxy
package-$(CONFIG_PACKAGE_ip6tables) += iptables
package-$(CONFIG_PACKAGE_ip6tables-utils) += iptables
package-$(CONFIG_PACKAGE_ipp) += ipp
package-$(CONFIG_PACKAGE_iptables) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-conntrack) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-conntrack-extra) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-extra) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-filter) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-imq) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-ipopt) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-iprange) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-ipsec) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-nat) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-nat-extra) += iptables
package-$(CONFIG_PACKAGE_iptables-mod-ulog) += iptables
package-$(CONFIG_PACKAGE_iptables-utils) += iptables
package-$(CONFIG_PACKAGE_kmod-atheros-aquila-madwifi) += atheros-aquila-madwifi
package-$(CONFIG_PACKAGE_kmod-atheros-enet) += atheros-enet
package-$(CONFIG_PACKAGE_kmod-atheros-gpio) += atheros-gpio
package-$(CONFIG_PACKAGE_kmod-conenat) += kmod-conenat
package-$(CONFIG_PACKAGE_kmod-dni-dmapool) += dni-dmapool
package-$(CONFIG_PACKAGE_kmod-dni-lan-qos) += kmod-dni-lan-qos
package-$(CONFIG_PACKAGE_kmod-dni-mtdoops) += dni-mtdoops
package-$(CONFIG_PACKAGE_kmod-dni-qos) += kmod-dni-qos
package-$(CONFIG_PACKAGE_kmod-dnih323) += kmod-dnih323
package-$(CONFIG_PACKAGE_kmod-dnirtsp) += kmod-dnirtsp
package-$(CONFIG_PACKAGE_kmod-dnisip) += kmod-dnisip
package-$(CONFIG_PACKAGE_kmod-dnistarcraft-alg) += kmod-starcraft
package-$(CONFIG_PACKAGE_kmod-dnshijack) += kmod-dnshijack
package-$(CONFIG_PACKAGE_kmod-ftp-alg) += kmod-ftp-alg
package-$(CONFIG_PACKAGE_kmod-hw-cdc) += kmod-hw-cdc
package-$(CONFIG_PACKAGE_kmod-ipsec-alg) += kmod-ipsec-alg
package-$(CONFIG_PACKAGE_kmod-ipv6-cone) += kmod-ipv6-cone
package-$(CONFIG_PACKAGE_kmod-kcode) += kcode
package-$(CONFIG_PACKAGE_kmod-l2tp) += kmod-l2tp
package-$(CONFIG_PACKAGE_kmod-nat2.5) += kmod-nat2.5
package-$(CONFIG_PACKAGE_kmod-netgear-reject) += kmod-netgear-reject
package-$(CONFIG_PACKAGE_kmod-pptp) += kmod-pptp
package-$(CONFIG_PACKAGE_kmod-pptp-alg) += kmod-pptp-alg
package-$(CONFIG_PACKAGE_kmod-spiadvdos) += kmod-spiadvdos
package-$(CONFIG_PACKAGE_kmod-spidos) += kmod-spidos
package-$(CONFIG_PACKAGE_kmod-trigger) += kmod-trigger
package-$(CONFIG_PACKAGE_kmod-urlblock) += kmod-urlblock
package-$(CONFIG_PACKAGE_ldconfig) += base-files
package-$(CONFIG_PACKAGE_ldd) += base-files
package-$(CONFIG_PACKAGE_led-control) += led-control
package-$(CONFIG_PACKAGE_led-extender) += led-extender
package-$(CONFIG_PACKAGE_libavahi) += avahi
package-$(CONFIG_PACKAGE_libblkid) += e2fsprogs
package-$(CONFIG_PACKAGE_libc) += base-files
package-$(CONFIG_PACKAGE_libcharset) += libiconv
package-$(CONFIG_PACKAGE_libcryptoxx) += libcryptoxx
package-$(CONFIG_PACKAGE_libcurl) += libcurl
package-$(CONFIG_PACKAGE_libcyassl) += cyassl
package-$(CONFIG_PACKAGE_libdaemon) += libdaemon
package-$(CONFIG_PACKAGE_libdb47) += db47
package-$(CONFIG_PACKAGE_libevent2) += libevent2
package-$(CONFIG_PACKAGE_libevent2-core) += libevent2
package-$(CONFIG_PACKAGE_libevent2-extra) += libevent2
package-$(CONFIG_PACKAGE_libevent2-openssl) += libevent2
package-$(CONFIG_PACKAGE_libevent2-pthreads) += libevent2
package-$(CONFIG_PACKAGE_libexif) += libexif
package-$(CONFIG_PACKAGE_libexpat) += expat
package-$(CONFIG_PACKAGE_libflac) += libflac
package-$(CONFIG_PACKAGE_libgcc) += base-files
package-$(CONFIG_PACKAGE_libgcrypt) += libgcrypt
package-$(CONFIG_PACKAGE_libgdbm) += gdbm
package-$(CONFIG_PACKAGE_libgpg-error) += libgpg-error
package-$(CONFIG_PACKAGE_libiconv) += libiconv
package-$(CONFIG_PACKAGE_libid3tag) += libid3tag
package-$(CONFIG_PACKAGE_libintl) += gettext
package-$(CONFIG_PACKAGE_libiptc) += iptables
package-$(CONFIG_PACKAGE_libiw) += wireless-tools
package-$(CONFIG_PACKAGE_libjpeg) += libjpeg
package-$(CONFIG_PACKAGE_libltdl) += libtool
buildtypes-libtool = host
package-$(CONFIG_PACKAGE_liblua) += lua
buildtypes-lua = host
package-$(CONFIG_PACKAGE_libncurses) += ncurses
package-$(CONFIG_PACKAGE_libogg) += libogg
package-$(CONFIG_PACKAGE_libopenssl) += openssl
package-$(CONFIG_PACKAGE_libpcap) += libpcap
package-$(CONFIG_PACKAGE_libpng) += libpng
package-$(CONFIG_PACKAGE_libpthread) += base-files
package-$(CONFIG_PACKAGE_libreadline) += libreadline
package-$(CONFIG_PACKAGE_librt) += base-files
package-$(CONFIG_PACKAGE_libsqlite3) += sqlite3
package-$(CONFIG_PACKAGE_libssp) += base-files
package-$(CONFIG_PACKAGE_libstdcpp) += base-files
package-$(CONFIG_PACKAGE_libuci) += uci
package-$(CONFIG_PACKAGE_libuci-lua) += uci
package-$(CONFIG_PACKAGE_libusb) += libusb
package-$(CONFIG_PACKAGE_libuuid) += e2fsprogs
package-$(CONFIG_PACKAGE_libvorbis) += libvorbis
package-$(CONFIG_PACKAGE_libwxwidgets) += libwxwidgets
package-$(CONFIG_PACKAGE_libxml2) += libxml2
package-$(CONFIG_PACKAGE_libxtables) += iptables
package-$(CONFIG_PACKAGE_lltd) += lltd
package-$(CONFIG_PACKAGE_lua) += lua
package-$(CONFIG_PACKAGE_lua-examples) += lua
package-$(CONFIG_PACKAGE_luac) += lua
package-$(CONFIG_PACKAGE_minidlna) += minidlna
package-$(CONFIG_PACKAGE_miniupnpd) += miniupnpd
package-$(CONFIG_PACKAGE_net-cgi) += net-cgi
package-$(CONFIG_PACKAGE_net-disk) += net-disk
package-$(CONFIG_PACKAGE_net-dump) += net-dump
package-$(CONFIG_PACKAGE_net-scan) += net-scan
package-$(CONFIG_PACKAGE_net-util) += net-util
package-$(CONFIG_PACKAGE_net-wall) += net-wall
package-$(CONFIG_PACKAGE_net6conf) += net6conf
package-$(CONFIG_PACKAGE_netatalk) += netatalk
package-$(CONFIG_PACKAGE_netatalk-utility) += netatalk-utility
package-$(CONFIG_PACKAGE_noip) += noip
package-$(CONFIG_PACKAGE_ntgrddns) += ntgrddns
package-$(CONFIG_PACKAGE_ookla) += ookla
package-$(CONFIG_PACKAGE_openssl-util) += openssl
package-$(CONFIG_PACKAGE_phddns) += phddns
package-$(CONFIG_PACKAGE_pot) += pot
package-$(CONFIG_PACKAGE_ppp-nas) += ppp-nas
package-$(CONFIG_PACKAGE_proccgi) += proccgi
package-$(CONFIG_PACKAGE_proftpd) += proftpd
package-$(CONFIG_PACKAGE_px5g) += px5g
package-$(CONFIG_PACKAGE_radvd) += radvd
package-$(CONFIG_PACKAGE_realpath) += realpath
package-$(CONFIG_PACKAGE_resize2fs) += e2fsprogs
package-$(CONFIG_PACKAGE_samba) += samba
package-$(CONFIG_PACKAGE_samba-scripts) += samba-scripts
package-$(CONFIG_PACKAGE_sqlite3-cli) += sqlite3
package-$(CONFIG_PACKAGE_ssmtp) += ssmtp
package-$(CONFIG_PACKAGE_tcpdump) += tcpdump
package-$(CONFIG_PACKAGE_telnetenable) += telnetenable
package-$(CONFIG_PACKAGE_trafficmeter) += trafficmeter
package-$(CONFIG_PACKAGE_transmission-cli) += transmission
package-$(CONFIG_PACKAGE_transmission-daemon) += transmission
package-$(CONFIG_PACKAGE_transmission-remote) += transmission
package-$(CONFIG_PACKAGE_transmission-web) += transmission
package-$(CONFIG_PACKAGE_tune2fs) += e2fsprogs
package-$(CONFIG_PACKAGE_uci) += uci
package-$(CONFIG_PACKAGE_ucitrigger) += uci
package-$(CONFIG_PACKAGE_udev) += udev
package-$(CONFIG_PACKAGE_udevtrigger) += udev
package-$(CONFIG_PACKAGE_udhcp) += udhcp
package-$(CONFIG_PACKAGE_uhttpd) += uhttpd
package-$(CONFIG_PACKAGE_uhttpd-mod-lua) += uhttpd
package-$(CONFIG_PACKAGE_uhttpd-mod-tls) += uhttpd
package-$(CONFIG_PACKAGE_usb-modeswitch) += usb-modeswitch
package-$(CONFIG_PACKAGE_utelnetd) += utelnetd
package-$(CONFIG_PACKAGE_wget) += wget
package-$(CONFIG_PACKAGE_wide-dhcpv6-client) += wide-dhcpv6
package-$(CONFIG_PACKAGE_wide-dhcpv6-control) += wide-dhcpv6
package-$(CONFIG_PACKAGE_wide-dhcpv6-relay) += wide-dhcpv6
package-$(CONFIG_PACKAGE_wide-dhcpv6-server) += wide-dhcpv6
package-$(CONFIG_PACKAGE_wireless-tools) += wireless-tools
package-$(CONFIG_PACKAGE_wlan-common) += wlan-common
package-$(CONFIG_PACKAGE_zebra) += zebra
package-$(CONFIG_PACKAGE_zip) += zip
package-$(CONFIG_PACKAGE_zlib) += zlib

$(curdir)/acl/compile += $(curdir)/datalib/compile
$(curdir)/amule/compile += $(curdir)/ncurses/compile $(curdir)/libreadline/compile $(curdir)/libwxwidgets/compile $(curdir)/libpng/compile $(curdir)/libcryptoxx/compile
$(curdir)/atheros-aquila-madwifi-11n-scripts/compile += $(curdir)/atheros-aquila-madwifi/compile
$(curdir)/atheros-aquila-wpa2/compile += $(curdir)/atheros-aquila-madwifi/compile
$(curdir)/avahi/compile += $(curdir)/libtool/compile $(curdir)/expat/compile $(curdir)/gdbm/compile $(curdir)/libdaemon/compile
$(curdir)/libcurl/compile += $(curdir)/openssl/compile $(curdir)/zlib/compile
$(curdir)/dni-ntpclient/compile += $(curdir)/datalib/compile
$(curdir)/dni-ripd/compile += $(curdir)/datalib/compile
$(curdir)/dnippp/compile += $(curdir)/kmod-pptp/compile $(curdir)/libpcap/compile $(curdir)/kmod-l2tp/compile
$(curdir)/dns-ipupdate/compile += $(curdir)/datalib/compile
$(curdir)/greendownload/compile += $(curdir)/transmission/compile $(curdir)/wget/compile $(curdir)/amule/compile
$(curdir)/libiconv/compile += $(curdir)/libtool/compile
$(curdir)/iptables/compile += $(curdir)/libtool/compile
$(curdir)/libcryptoxx/compile += $(curdir)/libtool/compile
$(curdir)/libdaemon/compile += $(curdir)/libtool/compile
$(curdir)/db47/compile += $(curdir)/libxml2/compile
$(curdir)/libevent2/compile += $(curdir)/openssl/compile
$(curdir)/expat/compile += $(curdir)/libtool/compile
$(curdir)/libflac/compile += $(curdir)/libogg/compile
$(curdir)/libgcrypt/compile += $(curdir)/libgpg-error/compile $(curdir)/libtool/compile
$(curdir)/gdbm/compile += $(curdir)/libtool/compile
$(curdir)/libgpg-error/compile += $(curdir)/libtool/compile
$(curdir)/libid3tag/compile += $(curdir)/zlib/compile
$(curdir)/gettext/compile += $(curdir)/libtool/compile
$(curdir)/libtool/compile += $(curdir)/libtool/host/compile
$(curdir)/openssl/compile += $(curdir)/zlib/compile
$(curdir)/libpng/compile += $(curdir)/zlib/compile
$(curdir)/sqlite3/compile += $(curdir)/ncurses/compile $(curdir)/libreadline/compile
$(curdir)/uci/compile += $(curdir)/lua/compile
$(curdir)/libusb/compile += $(curdir)/libtool/compile
$(curdir)/libwxwidgets/compile += $(curdir)/expat/compile $(curdir)/zlib/compile
$(curdir)/libxml2/compile += $(curdir)/zlib/compile $(curdir)/libtool/compile
$(curdir)/minidlna/compile += $(curdir)/libvorbis/compile $(curdir)/libjpeg/compile $(curdir)/libexif/compile $(curdir)/libid3tag/compile $(curdir)/zlib/compile $(curdir)/libflac/compile $(curdir)/libogg/compile $(curdir)/sqlite3/compile $(curdir)/ffmpeg/compile
$(curdir)/net-util/compile += $(curdir)/datalib/compile
$(curdir)/net-wall/compile += $(curdir)/datalib/compile
$(curdir)/net6conf/compile += $(curdir)/wide-dhcpv6/compile $(curdir)/radvd/compile
$(curdir)/netatalk/compile += $(curdir)/libgcrypt/compile $(curdir)/netatalk-utility/compile $(curdir)/db47/compile $(curdir)/openssl/compile
$(curdir)/ppp-nas/compile += $(curdir)/ipp/compile
$(curdir)/samba-scripts/compile += $(curdir)/samba/compile
$(curdir)/ssmtp/compile += $(curdir)/openssl/compile
$(curdir)/tcpdump/compile += $(curdir)/libpcap/compile
$(curdir)/transmission/compile += $(curdir)/libcurl/compile $(curdir)/openssl/compile $(curdir)/libevent2/compile $(curdir)/libtool/compile
$(curdir)/uhttpd/compile += $(if $(CONFIG_PACKAGE_uhttpd-mod-tls_cyassl),$(curdir)/cyassl/compile) $(curdir)/lua/compile $(if $(CONFIG_PACKAGE_uhttpd-mod-tls_openssl),$(curdir)/openssl/compile)
$(curdir)/usb-modeswitch/compile += $(curdir)/libusb/compile

$(TARGET_DIR)/etc/uci-defaults/base-files: FORCE
	mkdir -p $(TARGET_DIR)/etc/uci-defaults
	( \
	echo "uci set 'network.lan.netmask=$(subst ",,$(CONFIG_UCI_PRECONFIG_network_lan_netmask))'"; \
	echo "uci set 'network.lan.gateway=$(subst ",,$(CONFIG_UCI_PRECONFIG_network_lan_gateway))'"; \
	echo "uci set 'network.lan.ipaddr=$(subst ",,$(CONFIG_UCI_PRECONFIG_network_lan_ipaddr))'"; \
	echo "uci set 'network.lan.dns=$(subst ",,$(CONFIG_UCI_PRECONFIG_network_lan_dns))'"; \
	echo "uci set 'network.lan.proto=$(subst ",,$(CONFIG_UCI_PRECONFIG_network_lan_proto))'"; \
 \
	) > $@
	
ifneq ($(UCI_PRECONFIG)$(CONFIG_UCI_PRECONFIG),)
  package/preconfig: $(TARGET_DIR)/etc/uci-defaults/base-files
endif
